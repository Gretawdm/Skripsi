<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>ARIMAX Energy Dashboard</title>
</head>

<body>

    <button id="refreshBtn">ðŸ”„ Refresh Data</button>
    <div id="loading-container" style="display:none; width:300px; border:1px solid #ccc; margin:10px 0">
        <div id="loading-bar" style="height:12px; width:0%; background:#4CAF50; transition:width 0.4s;">
        </div>
    </div>

    <p id="loading-text" style="display:none">Updating data... 0%</p>


    <p id="statusText"></p>

    <table border="1" cellpadding="8" cellspacing="0">
        <thead>
            <tr>
                <th>Nama Data</th>
                <th>Status</th>
                <th>Terakhir Diperbarui</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Data Energi Fosil</td>
                <td id="energyStatus">-</td>
                <td id="energyTime">-</td>
            </tr>
            <tr>
                <td>Data GDP</td>
                <td id="gdpStatus">-</td>
                <td id="gdpTime">-</td>
            </tr>
        </tbody>
    </table>
    <style>
        #loading-container {
            width: 300px;
            height: 12px;
            border: 1px solid #999;
            border-radius: 6px;
            overflow: hidden;
            background: #f1f1f1;
        }

        #loading-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #4CAF50, #8BC34A);
            animation: loadingMove 1.5s linear infinite;
        }

        @keyframes loadingMove {
            0% {
                width: 0%;
                transform: translateX(0);
            }

            50% {
                width: 70%;
            }

            100% {
                width: 0%;
                transform: translateX(300px);
            }
        }
    </style>
    <script>
        let progressInterval;

        function startLoading() {
            const bar = document.getElementById("loading-bar");
            const text = document.getElementById("loading-text");

            document.getElementById("loading-container").style.display = "block";
            text.style.display = "block";

            let progress = 0;
            bar.style.width = "0%";
            text.innerText = "Updating data... 0%";

            progressInterval = setInterval(() => {
                if (progress < 90) {
                    progress += 5;
                    bar.style.width = progress + "%";
                    text.innerText = `Updating data... ${progress}%`;
                }
            }, 300);
        }

        function stopLoading() {
            const bar = document.getElementById("loading-bar");
            const text = document.getElementById("loading-text");

            clearInterval(progressInterval);

            bar.style.width = "100%";
            text.innerText = "Update selesai 100%";

            setTimeout(() => {
                document.getElementById("loading-container").style.display = "none";
                text.style.display = "none";
                bar.style.width = "0%";
            }, 800);
        }


    </script>
    <script src="{{ url_for('static', filename='assets/js/main.js') }}"></script>
</body>

</html>